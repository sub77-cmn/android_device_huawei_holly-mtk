From 19adcff1c73e636b31bdfd414b2f6d3369e71296 Mon Sep 17 00:00:00 2001
From: sub77 <sub77@ymail.com>
Date: Wed, 7 Sep 2016 02:46:02 +0200
Subject: [PATCH 01/13] Patching device-tree

exec patchsetup.sh in selected devicetree

Change-Id: I9193208d0cedd8bae8953ec249de50be96b4de53
---
 envsetup.sh | 11 +++++++++++
 1 file changed, 11 insertions(+)

diff --git a/envsetup.sh b/envsetup.sh
index 9e09b71..4192071 100644
--- a/envsetup.sh
+++ b/envsetup.sh
@@ -305,12 +305,23 @@ function printconfig()
     get_build_var report_config
 }
 
+function patchdevicetree()
+{
+for f in `test -d device && find -L device/*/$CM_BUILD -maxdepth 4 -name 'patchsetup.sh' 2> /dev/null`
+do
+            echo "Patching device-tree -> $f"
+            . $f
+done
+unset f
+}
+
 function set_stuff_for_environment()
 {
     settitle
     set_java_home
     setpaths
     set_sequence_number
+    patchdevicetree
 
     # With this environment variable new GCC can apply colors to warnings/errors
     export GCC_COLORS='error=01;31:warning=01;35:note=01;36:caret=01;32:locus=01:quote=01'
-- 
2.9.3

